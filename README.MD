GCBase version 0.01 a.
=============
Описание логики и класса js, реализующие систему оперативного хранения данных в структуре, похожей на SQL-базу данных.
Основные возможности: перекрёстные ссылки на таблицы, поиск и фильтрация таблиц, хранение данных в local storage.


Specification
=============

Database main object description
-------------
Основной объект базы данных содержит специальный ключ:
__data, являющийся обязательным.
Остальные ключи в основном объекте — таблицы БД.

Ключ __data содержит объект, который описывает базу данных: 
имя, версия краткое описание. Все — текст.

```javascript
__data: {
	name: "myBase",
	version: "1.0",
	description: "A little db for some practice"
}
```

Tables description
------------------
Таблица — объект, содержащий специальный ключ __captions, 
являющийся обязательным, в объекте по этому ключу 
описывается каждое поле таблицы: его тип и доп. информация,
нужная для работы с полем. Также таблица содержит обязательный
ключ rows, с массивом объектов — данные таблицы.
Если таблица пуста, содержит пустой массив.

```javascript
mygoods: {
	__captions: {
		id: {
			type: "auto",
			format: "integer",
			next: 1
		},
		
		name: {
			type: "text",
			format: "string"
		}
	}
	
	rows: [
		{id: 0, name: "Холодильная камера"}
	]
}
```
### Keys formats description

#### type: auto

Поле с автоинкрементом по добавлению записи.
Обязательные поля:
* **format** (в текущей версии всегда равен "integer")
* **next:** ***integer*** следующее значение для поля.
* **uniq:** true

Все описания полей заполняются автоматически. Нумерация всегда начинается с нуля, это не настраивается.

#### type: link
Ссылка на запись или поле записи в другой таблице.

Обязательные поля
* **data:** all | colname1,colname2 |colname 
(вся запись целиком | набор полей из записи | значение одного поля записи)
* **to:** tablename~colname

Если link указывает на поле с атрибутом uniq: true, программа будет
возвращать по ссылке одну запись (объект). В другом случае,
вернет массив объектов, совпавших со значением colname параметра to.

Не может содержать uniq

#### type: qlink
Квазиссылка. Копирует фактическое значение по адресу из to, не следует по ссылкам.

Обязательные поля
* **to:** tablename~colname
* **data:** colname
* **format**: скопирует формат поля по ссылке, если есть, иначе текст.

Не может содержать uniq

#### type: text
Текстовое поле.
обязательные поля: нет.
Автоматически устанавливается 
```javascript
format: string
```

Возможные поля:
* **uniq:** true | false.

#### type: date
Дата в формате js Date. Хранится как число. 
Обязательные поля:
* **format:** {} описание формата в нотации js Date
не может содержать uniq.

#### type: number
Число. Может быть целым или с указанной точностью.

Обязательные поля:
* **format:** integer | float | precision (целое | с плавающей запятой | с указанной точностью)

Для формата precision обязательно требуется поле
* **precision**: ***integer***. Указывается число знаков после запятой.
Формат precision пока не реализован.

Возможные поля:
* **uniq:** true | false.

#### type: flag
Булево значение.
Обязательные поля отсутствуют
* **format:** integer | float | precision (целое | с плавающей запятой | с указанной точностью)
не может содержать uniq.


#### type: formula
Поле, вычисляемое на основании других полей строки при запросе. Не реализовано.

Description of mechanics GCBase class
================


Userguide for GCBase class
================
Примем, что basе — экземпляр класса GCBase.

Создание base
------------
Если при создании экземпляра, конструктору можно передать объект с ключами, характерными для заголовка БД или строку.

В первом случае будет создана пустая БД с использованием переданной информации. Во втором случае, предполагается, что получена стрингифицированная БД. Строка парсится с помощью JSON.parse и использованием вспомогательных функций {insert names here later} для приведения содержимого ключей к нужному формату и проверки валидности.

```javascript
//Case #1 example
let base = new GCBase( {name: "customersBase", version: "0.1a", description: "База данных продуктов, клиентов и покупок"});
```

```javascript
//Case #2 example
let base = new GCBase( 
`{
    __data: {name: "customersBase", version: "0.1a", description: "База данных продуктов, клиентов и покупок"}, 
    
    customers: {
        __captions: {
            id: {
                type: "auto",
                format: "integer",
                uniq: true,
                next: 1
            },
            name: {
                type: "text"
            }
        },
        rows: [
            {id: 0, name: "Петров Сергей Иванович"}
        ]
    }
}` );
```


Создание БД методами экземпляра GCBase не предусмотрено.

Создание таблицы
-----------------
Метод add принимает объект, описывающий столбцы (поля) таблицы, с указанием обязательных элементов
описания, значение которых не выставляется автоматически (см. "Keys formats description").


```javascript
base.add("customers", { 
	id: {
		type: "auto"
	},
	
	FIO: {
		type: "text"
    }
);
```
